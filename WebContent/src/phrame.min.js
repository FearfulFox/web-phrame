(function(){var a={written:!1,baseElement:null,instances:[],catInstances:{},pheInstances:[],Vec2D:function(a,c){return{x:a,y:c}},write:function(b,c){c.autoSize();c.contain([b]);c.generate();a.baseElement=c;a.written=!0;a.Styles.runSelectQueue();return!0}};window.onresize=function(b){null!=a.baseElement&&a.baseElement.recalcSize()};a.clone=function(b){var c={},d;for(d in b)switch(typeof b[d]){case "undefined":c[d]=void 0;break;case "boolean":c[d]=Boolean(b[d]);break;case "number":c[d]=Number(b[d]);
break;case "string":c[d]=String(b[d]);break;case "object":"[object Array]"===Object.prototype.toString.call(b[d])?c[d]=b[d].slice(0):c[d]=null===b[d]?null:a.clone(b[d])}return c};a.cloneInto=function(b,c){for(var d in c)switch(typeof c[d]){case "undefined":b[d]=void 0;break;case "null":b[d]=null;break;case "boolean":b[d]=Boolean(c[d]);break;case "number":b[d]=Number(c[d]);break;case "string":b[d]=String(c[d]);break;case "object":"[object Array]"===Object.prototype.toString.call(c[d])?b[d]=c[d].slice(0):
b[d]=null===c[d]?null:a.clone(c[d])}};a.Class=function(b){for(var c=b.name.split("."),d=function(b){this.$=this;null!=this._super&&(this._super.$=this);var c=this.classFullName;a.catInstances[c]=a.catInstances[c]||[];a.catInstances[c].push(this);"Style"!=this.className&&a.pheInstances.push(this);a.instances.push(this);this.instanceID=a.instances.length-1;null!=this._properties&&a.cloneInto(this,this._properties);null!=this._construct&&(null==b&&(b={}),this._construct(b))},g=a,e=null,h=0;h<c.length;h++){var n=
c[h];if(h===c.length-1){g[n]=d;e=g[n].prototype;e.className=n;e.classFullName=b.name;e._properties={};break}else"undefined"===typeof g[n]&&(g[n]={}),g=g[n]}if("object"===typeof b.properties){var h=b.properties,f;for(f in h)e._properties[f]=h[f]}if("object"===typeof b.methods)for(f in h=b.methods,h)e[f]=h[f];if(void 0!=b.extend){b=b.extend.split(".");c=a;for(h=0;h<b.length;h++)f=b[h],c=c[f];if("function"===typeof c)for(f in h=c.prototype,e._super={},h)e._super[f]=h[f],void 0==e[f]?e[f]=h[f]:"_properties"===
f&&a.cloneInto(e[f],h[f])}};window.PHRAME=a;Array.prototype.pushUnique=function(a){for(var c=!1,d=0;d<this.length;d++)if(this[d]===a){c=!0;break}!1===c&&this.push(a)}})();
(function(){PHRAME.Class({name:"Styles.Style",methods:{_construct:function(a){this.$.style=document.createElement("div").style;this.$.elements=[];this.$.properties={};this.$.set(a)},set:function(a){for(var b in a)this.$.properties[b]=a[b];this.$.setupStyle(this.$.properties);this.$.genElementStyles()},genCSSColor:function(a){"object"!==typeof a?a={r:0,g:0,b:0}:(null==a.r&&(a.r=0),null==a.g&&(a.g=0),null==a.b&&(a.b=0));return"rgb("+String(a.r)+","+String(a.g)+","+String(a.b)+")"},setupStyle:function(a){for(var b in a)if(void 0!==
this.$.style[b]){var c="";switch(b){case "color":c=this.$.genCSSColor(a[b]);break;default:for(var d in a[b]){var g="";switch(d){case "length":case "size":case "width":case "height":g=String(a[b][d])+"px";break;case "color":g=this.$.genCSSColor(a[b][d]);break;default:g=a[b][d]}c+=String(g)+" "}c=c.substring(0,c.length-1)}this.$.style[b]=c}},get:function(){return this.$.style},clearElements:function(){},setElement:function(a){this.$.elements=[];this.$.addElement(a)},addElement:function(a){if(null!=
a){a="object"===typeof a?a:[a];for(var b=0;b<a.length;b++){var c=a[b];c.styles.pushUnique(this.$.instanceID);this.$.elements.pushUnique(c.instanceID);c.genStyles()}}},genElementStyles:function(){for(var a=0;a<this.$.elements.length;a++)PHRAME.instances[this.$.elements[a]].genStyles()}}})})();PHRAME.Styles.queue=[];
PHRAME.Styles.select=function(a,b){if(!0!==PHRAME.written)PHRAME.Styles.queue.push([a.instanceID,b]);else{var c=PHRAME.pheInstances,d;for(d in b)if("object"===d){for(var g=[],e=0;e<c.length;e++)c[e].classFullName===b[d]&&g.push(c[e]);c=g}else if("className"===d){g=[];for(e=0;e<c.length;e++)c[e].hasClass(b[d])&&g.push(c[e]);c=g}else if("element"===d){g=[];for(e=0;e<c.length;e++)c[e].getElement().tagName===b[d].toUpperCase()&&g.push(c[e]);c=g}for(e=0;e<c.length;e++)c[e].addStyle([a])}};
PHRAME.Styles.runSelectQueue=function(){for(var a=0;a<PHRAME.Styles.queue.length;a++){var b=PHRAME.Styles.queue[a];PHRAME.Styles.select(PHRAME.instances[b[0]],b[1])}PHRAME.Styles.queue=[]};
(function(){PHRAME.Class({name:"Elements.Element",properties:{element:null,classes:[],width:null,height:null,proportion:null,parent:null,siblings:[],children:[],styles:[],childAlignment:!0},methods:{_construct:function(a){a="object"===typeof a?a:{};this.$.setElement(a.element);void 0!==a.className&&this.$.setClass(a.className);void 0!==a.width&&this.$.setWidth(a.width);void 0!==a.height&&this.$.setHeight(a.height)},setElement:function(a){switch(typeof a){case "string":this.$.element=document.createElement(a);
break;case "object":this.$.element=a;break;default:this.$.element=document.createElement("div")}this.element.setAttribute("id",this.instanceID)},getElement:function(){return this.$.element},setClass:function(a){classes=[];this.$.addClass(a)},addClass:function(a){if(null!=a){a="object"===typeof a?a:[a];for(var b=0;b<a.length;b++)this.$.classes.push(a[b])}},hasClass:function(a){for(var b in this.$.classes)if(this.$.classes[b]===a)return!0;return!1},setWidth:function(a){this.$.width=a;this.$._recalcParent()},
setHeight:function(a){this.$.height=a;this.$._recalcParent()},setSize:function(a){"object"!==typeof a&&(a={});a.width=a.width?a.width:null;a.height=a.height?a.height:null;this.$.width=a.width;this.$.height=a.height;this.$._recalcParent()},setProportion:function(a){"number"===typeof a&&(0>a&&(a=0),100<a&&(a=100),this.$.proportion=a,this.$._recalcParent())},fillSize:function(a){"object"!==typeof a&&(a={});a.width=null!=a.width?a.width:!0;a.height=null!=a.height?a.height:!0;!0===a.width&&(this.$.width=
null);!0===a.height&&(this.$.height=null);var b=0,c=0,d=PHRAME.instances[this.$.parent];d?(b=parseFloat(d.element.style.width)||0,c=parseFloat(d.element.style.height)||0):(b=window.innerWidth,c=window.innerHeight,d={childAlignment:!0});var g=this.$.getOutsideWidth(),e=this.$.getOutsideHeight(),h=0,n=0;if(!0===d.childAlignment){var f=d=0,l=0,l=0;if(null===this.$.width)d++;else var k=this.$.getWidth(),f=f+(isNaN(k)?0:k);for(var p=0;p<this.$.siblings.length;p++)k=PHRAME.instances[this.$.siblings[p]],
null===k.width?null===k.proportion?d++:l+=k.proportion:(k=k.getWidth(),f+=isNaN(k)?0:k);b-=f;l=null!==this.$.proportion?this.$.proportion:(100-l)/d;h=b-l/100*b}else{l=f=d=0;null===this.$.height?d++:(k=this.$.getHeight(),f+=isNaN(k)?0:k);for(p=0;p<this.$.siblings.length;p++)k=PHRAME.instances[this.$.siblings[p]],null===k.height?null===k.proportion?d++:l+=k.proportion:(k=k.getHeight(),f+=isNaN(k)?0:k);c-=f;l=null!==this.$.proportion?this.$.proportion:(100-l)/d;n=c-l/100*c}b=a.width?b-(g+h):this.$.width-
g;this.$.element.style.width=String(b)+"px";b=a.height?c-(e+n):this.$.height-e;this.$.element.style.height=String(b)+"px"},clearSize:function(){this.$.width=null;this.$.height=null},autoSize:function(){this.$.fillSize({width:null===this.$.width?!0:!1,height:null===this.$.height?!0:!1})},recalcSize:function(){this.$.autoSize();for(var a=0;a<this.$.children.length;a++)PHRAME.instances[this.$.children[a]].recalcSize()},getWidth:function(){return this.$.width},getHeight:function(){return this.$.height},
getMarginWidth:function(){var a=parseFloat(this.$.element.style.marginLeft),b=parseFloat(this.$.element.style.marginRight);return(a?a:0)+(b?b:0)},getMarginHeight:function(){var a=parseFloat(this.$.element.style.marginTop),b=parseFloat(this.$.element.style.marginBottom);return(a?a:0)+(b?b:0)},getBorderWidth:function(){var a=parseFloat(this.$.element.style.borderLeftWidth),b=parseFloat(this.$.element.style.borderRightWidth);return(a?a:0)+(b?b:0)},getBorderHeight:function(){var a=parseFloat(this.$.element.style.borderTopWidth),
b=parseFloat(this.$.element.style.borderBottomWidth);return(a?a:0)+(b?b:0)},getPaddingWidth:function(){var a=parseFloat(this.$.element.style.paddingLeft),b=parseFloat(this.$.element.style.paddingRight);return(a?a:0)+(b?b:0)},getPaddingHeight:function(){var a=parseFloat(this.$.element.style.paddingTop),b=parseFloat(this.$.element.style.paddingBottom);return(a?a:0)+(b?b:0)},getOutsideWidth:function(){return this.$.getMarginWidth()+this.$.getBorderWidth()+this.$.getPaddingWidth()},getOutsideHeight:function(){return this.$.getMarginHeight()+
this.$.getBorderHeight()+this.$.getPaddingHeight()},contain:function(a){this.$.release();for(var b=0;b<a.length;b++){var c=a[b];c.parent=this.$.instanceID;for(var d=0;d<a.length;d++)d!=b&&c.siblings.push(a[d].instanceID);this.$.element.appendChild(c.element);c.autoSize();this.$.children.push(c.instanceID)}this.$.recalcSize()},release:function(){for(var a=0;a<this.$.children.length;a++){var b=PHRAME.instances[this.$.children[a]];b.parent=null;b.siblings=[];this.$.element.removeChild(b.element)}this.$.children=
[]},alignChildren:function(a){a=!0===a||"h"===a||"horizontal"===a?!0:!1;if(a!==this.$.childAlignment){this.$.childAlignment=a;for(a=0;a<this.$.children.length;a++){var b=PHRAME.instances[this.$.children[a]],c=b.getWidth(),d=b.getHeight();b.setSize({width:d,height:c})}this.$.recalcSize()}},setStyle:function(a){this.$.styles=[];this.$.addStyle(a)},addStyle:function(a){if(null!=a){a="object"===typeof a?a:[a];for(var b=0;b<a.length;b++){var c=a[b];c.elements.pushUnique(this.$.instanceID);this.$.styles.pushUnique(c.instanceID)}this.$.genStyles()}},
removeStyle:function(){},genStyles:function(){for(var a=0;a<this.$.styles.length;a++){var b=PHRAME.instances[this.$.styles[a]];for(prop in b.properties)this.$.element.style[prop]=b.style[prop],"width"===prop&&this.$.setWidth(parseFloat(b.style[prop])),"height"===prop&&this.$.setHeight(parseFloat(b.style[prop]))}this.$.recalcSize()},generate:function(){this.$.autoSize();for(var a=0;a<this.$.children.length;a++)PHRAME.instances[this.$.children[a]].generate()},_recalcParent:function(){null!=this.$.parent&&
PHRAME.instances[this.$.parent].recalcSize()}}})})();
(function(){PHRAME.Class({name:"Elements.Widget",extend:"Elements.Element",properties:{title:""},methods:{_construct:function(a){a.element="div";this.$._super._construct(a);this.$.title=new PHRAME.Elements.Element({element:"div",className:"core-widget-title"});this.$.title.setHeight(20);this.$.content=new PHRAME.Elements.Element({element:"div",className:"core-widget-content"});this.$.alignChildren("vertical");this.$._super.contain([this.$.title,this.$.content])}}})})();
var m={},$=PHRAME,$c=PHRAME.Elements,$s=PHRAME.Styles;m.bodyStyle=new $s.Style({backgroundColor:{color:{r:80,g:80,b:80}}});m.widgetStyle=new $s.Style({margin:{size:2},border:{size:1,style:"solid",color:{r:120,g:120,b:120}},backgroundColor:{color:{r:140,g:140,b:140}}});
m.widgetTitleStyle=new $s.Style({borderTop:{size:1,style:"solid",color:{r:100,g:100,b:100}},borderLeft:{size:1,style:"solid",color:{r:100,g:100,b:100}},borderRight:{size:1,style:"solid",color:{r:100,g:100,b:100}},backgroundColor:{color:{r:120,g:120,b:120}}});
m.widgetContentStyle=new $s.Style({borderTop:{size:1,style:"solid",color:{r:100,g:100,b:100}},borderBottom:{size:1,style:"solid",color:{r:100,g:100,b:100}},borderLeft:{size:1,style:"solid",color:{r:100,g:100,b:100}},borderRight:{size:1,style:"solid",color:{r:100,g:100,b:100}}});$s.select(m.bodyStyle,{element:"body"});$s.select(m.widgetStyle,{object:"Elements.Widget"});$s.select(m.widgetTitleStyle,{className:"core-widget-title"});$s.select(m.widgetContentStyle,{className:"core-widget-content"});
window.onload=function(){m.body=new $c.Element({element:document.body});m.main=new $c.Element({element:"div"});m.other=new $c.Element({element:"div",className:"sample"});m.other.alignChildren("vertical");m.other2=new $c.Element({element:"div"});m.one=new $c.Widget({element:"div"});m.one.setProportion(60);m.two=new $c.Widget({element:"div",className:"sample"});m.two.setProportion(20);m.three=new $c.Widget({element:"div"});m.four=new $c.Widget({className:"sample"});m.five=new $c.Widget({element:"div"});
m.six=new $c.Widget({element:"div"});m.other2.contain([m.five,m.six]);m.other.contain([m.one,m.two,m.four]);m.main.contain([m.other,m.other2]);$.write(m.main,m.body)};